{"id":5002,"name":"指令下发","trigger_type":"EventDrive","graph":{"nodes":[{"id":1,"aoe_id":5002,"name":"收到功率下发指令","node_type":"ConditionNode","expr":{"rpn":[{"Var":"ifxiafa"},{"Number":1.0},{"Binary":"Equal"}]},"timeout":10},{"id":2,"aoe_id":5002,"name":"SOC限幅完成","node_type":"ConditionNode","expr":{"rpn":[{"Var":"P_xiafa"},{"Var":"P_xiafa"},{"Var":"P_chongdianeding"},{"Var":"SOC"},{"Var":"dod2"},{"Binary":"LessThan"},{"Binary":"Times"},{"Func":["max",2]},{"Var":"P_fangdianeding"},{"Var":"SOC"},{"Var":"dod1"},{"Binary":"GreatThan"},{"Binary":"Times"},{"Func":["min",2]},{"Binary":"Equal"}]},"timeout":10},{"id":3,"aoe_id":5002,"name":"死区限幅完成","node_type":"ConditionNode","expr":{"rpn":[{"Var":"P_xiafa"},{"Var":"P_zhiling"},{"Var":"P_xiafa"},{"Var":"P_zhiling"},{"Binary":"Minus"},{"Var":"P_xiafa"},{"Var":"P_zhiling"},{"Binary":"Minus"},{"Func":["abs",1]},{"Var":"P_dead"},{"Binary":"GreatThan"},{"Binary":"Times"},{"Binary":"Plus"},{"Binary":"Equal"}]},"timeout":10},{"id":4,"aoe_id":5002,"name":"储能开关机状态判断","node_type":"SwitchNode","expr":{"rpn":[{"Var":"PCS_state"},{"Number":1.0},{"Binary":"BitAt"},{"Number":0.0},{"Binary":"Equal"},{"Var":"start_times"},{"Number":3.0},{"Binary":"LessThan"},{"Binary":"And"}]},"timeout":10},{"id":5,"aoe_id":5002,"name":"功率方向判断","node_type":"SwitchNode","expr":{"rpn":[{"Var":"chargestat"},{"Number":0.0},{"Binary":"GreatThan"},{"Var":"P_xiafa"},{"Number":0.0},{"Binary":"GreatThan"},{"Binary":"And"},{"Var":"chargestat"},{"Number":0.0},{"Binary":"LessThan"},{"Var":"P_xiafa"},{"Number":0.0},{"Binary":"LessThan"},{"Binary":"And"},{"Binary":"Or"},{"Var":"chargestat"},{"Number":0.0},{"Binary":"Equal"},{"Binary":"Or"}]},"timeout":10},{"id":6,"aoe_id":5002,"name":"结束节点","node_type":"ConditionNode","expr":{"rpn":[{"Var":"ifxiafa"},{"Number":0.0},{"Binary":"Equal"}]},"timeout":1000},{"id":7,"aoe_id":5002,"name":"结束节点","node_type":"ConditionNode","expr":{"rpn":[{"Var":"ifxiafa"},{"Number":0.0},{"Binary":"Equal"}]},"timeout":1000}],"node_holes":[],"edge_property":"directed","edges":[[0,1,[0,{"aoe_id":5002,"name":"SOC限幅","source_node":1,"target_node":2,"failure_mode":"Default","action":{"SetPoints":{"discrete_id":["P_xiafa"],"discrete_v":[{"rpn":[{"Var":"P_xiafa"},{"Var":"P_chongdianeding"},{"Var":"SOC"},{"Var":"dod2"},{"Binary":"LessThan"},{"Binary":"Times"},{"Func":["max",2]},{"Var":"P_fangdianeding"},{"Var":"SOC"},{"Var":"dod1"},{"Binary":"GreatThan"},{"Binary":"Times"},{"Func":["min",2]}]}],"analog_id":[],"analog_v":[]}}}]],[1,2,[0,{"aoe_id":5002,"name":"死区限幅","source_node":2,"target_node":3,"failure_mode":"Default","action":{"SetPoints":{"discrete_id":["P_xiafa"],"discrete_v":[{"rpn":[{"Var":"P_zhiling"},{"Var":"P_xiafa"},{"Var":"P_zhiling"},{"Binary":"Minus"},{"Var":"P_xiafa"},{"Var":"P_zhiling"},{"Binary":"Minus"},{"Func":["abs",1]},{"Var":"P_dead"},{"Binary":"GreatThan"},{"Binary":"Times"},{"Binary":"Plus"}]}],"analog_id":[],"analog_v":[]}}}]],[2,3,[0,{"aoe_id":5002,"name":"0","source_node":3,"target_node":4,"failure_mode":"Default","action":"None"}]],[3,5,[0,{"aoe_id":5002,"name":"储能未开机","source_node":4,"target_node":6,"failure_mode":"Default","action":{"SetPoints":{"discrete_id":["P_zhiling","C_kaiji","start_times","ifxiafa"],"discrete_v":[{"rpn":[{"Var":"P_xiafa"}]},{"rpn":[{"Number":1.0},{"Var":"P_xiafa"},{"Number":0.0},{"Binary":"Unequal"},{"Binary":"Times"}]},{"rpn":[{"Var":"start_times"},{"Number":1.0},{"Binary":"Plus"}]},{"rpn":[{"Var":"P_xiafa"},{"Number":0.0},{"Binary":"Unequal"}]}],"analog_id":[],"analog_v":[]}}}]],[3,4,[1,{"aoe_id":5002,"name":"储能已开机","source_node":4,"target_node":5,"failure_mode":"Default","action":"None"}]],[4,5,[0,{"aoe_id":5002,"name":"下发功率同向","source_node":5,"target_node":6,"failure_mode":"Default","action":{"SetPoints":{"discrete_id":["P_zhiling","chargestat","cnt_chargestat_flip","ifxiafa"],"discrete_v":[{"rpn":[{"Var":"P_xiafa"}]},{"rpn":[{"Var":"chargestat"},{"Var":"chargestat"},{"Number":0.0},{"Binary":"Equal"},{"Var":"P_zhiling"},{"Number":0.0},{"Binary":"GreatThan"},{"Var":"P_zhiling"},{"Number":0.0},{"Binary":"LessThan"},{"Binary":"Minus"},{"Binary":"Times"},{"Binary":"Plus"}]},{"rpn":[{"Number":0.0}]},{"rpn":[{"Number":0.0}]}],"analog_id":[],"analog_v":[]}}}]],[4,6,[1,{"aoe_id":5002,"name":"下发功率反向","source_node":5,"target_node":7,"failure_mode":"Default","action":{"SetPoints":{"discrete_id":["P_zhiling","cnt_chargestat_flip","chargestat","ifxiafa"],"discrete_v":[{"rpn":[{"Var":"P_xiafa"},{"Var":"cnt_chargestat_flip"},{"Number":2.0},{"Binary":"GreatThan"},{"Binary":"Times"}]},{"rpn":[{"Var":"cnt_chargestat_flip"},{"Number":1.0},{"Binary":"Plus"},{"Var":"cnt_chargestat_flip"},{"Number":2.0},{"Binary":"LessThan"},{"Binary":"Times"}]},{"rpn":[{"Var":"chargestat"},{"Number":2.0},{"Var":"chargestat"},{"Binary":"Times"},{"Var":"cnt_chargestat_flip"},{"Number":2.0},{"Binary":"GtOrEqual"},{"Binary":"Times"},{"Binary":"Minus"}]},{"rpn":[{"Number":0.0}]}],"analog_id":[],"analog_v":[]}}}]]]},"variables":[]}
